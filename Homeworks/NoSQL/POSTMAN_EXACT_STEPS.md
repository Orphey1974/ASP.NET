# Точные шаги для настройки Postman для gRPC

## ⚠️ ВАЖНО: Сервис запущен и работает!
Проверка показала, что сервис запущен на порту 8093. Проблема в настройках Postman.

## Пошаговая инструкция:

### Шаг 1: Создайте новый gRPC запрос

1. Откройте Postman

2. Нажмите **"New"** (или `Ctrl+N`)

3. Выберите **"gRPC Request"**

### Шаг 2: Укажите URL (КРИТИЧНО!)
В поле URL введите:

```
http://localhost:8093

```
**ОБЯЗАТЕЛЬНО:**

- ✅ Используйте `http://` (не `https://`)

- ✅ Используйте `localhost` (не `127.0.0.1`)

- ✅ Порт: `8093`

### Шаг 3: ОТКЛЮЧИТЕ TLS (КРИТИЧНО!)

1. Найдите вкладку **"Settings"** внизу справа в окне Postman

2. Прокрутите вниз до раздела **"TLS"** или **"Security"**

3. Найдите опцию **"Use TLS"** или **"TLS"**

4. **СНИМИТЕ ГАЛОЧКУ** или выберите **"Plain text"**

5. **НЕ используйте "TLS" или "HTTPS"**
**Если не видите настройки TLS:**

- Нажмите на иконку шестеренки ⚙️ рядом с URL

- Или найдите кнопку "Settings" в правом верхнем углу

### Шаг 4: Импортируйте proto файл

1. В разделе **"Service definition"** нажмите **"Import a .proto file"**

2. Выберите файл:
   ```
   src\Pcf.GivingToCustomer\Pcf.GivingToCustomer.WebHost\Protos\customers.proto
   ```

3. После импорта должен появиться список сервисов

### Шаг 5: Выберите сервис и метод

1. В выпадающем списке выберите: **`CustomersService`**

2. Выберите метод, например: **`GetCustomers`**

### Шаг 6: Вызовите метод

1. Нажмите кнопку **"Invoke"** (или `Ctrl+Enter`)

2. Должен появиться ответ

## Проверка настроек TLS в Postman:

### Способ 1: Через вкладку Settings

1. Откройте вкладку **"Settings"** (внизу справа)

2. Найдите **"TLS"** или **"Use TLS"**

3. Убедитесь, что галочка **СНЯТА**

### Способ 2: Через иконку рядом с URL

1. Нажмите на иконку **⚙️** или **🔒** рядом с полем URL

2. В открывшемся меню найдите настройки TLS

3. Выберите **"Plain text"** или отключите TLS

## Если все еще не работает:

### Вариант 1: Перезапустите Postman

1. Закройте Postman полностью

2. Откройте заново

3. Попробуйте снова

### Вариант 2: Используйте другой инструмент
**BloomRPC:**

1. Скачайте: https://github.com/bloomrpc/bloomrpc/releases

2. Импортируйте proto файл

3. URL: `localhost:8093`

4. Отключите TLS
**grpcurl:**

```powershell
grpcurl -plaintext localhost:8093 list
grpcurl -plaintext -d '{}' localhost:8093 customers.CustomersService/GetCustomers

```

## Типичные ошибки:

| Ошибка | Причина | Решение |

|--------|---------|---------|

| "Service unavailable" | TLS включен | Отключите TLS в настройках |

| "No connection established" | Неправильный URL | Используйте `http://localhost:8093` |

| "TLS required" | Postman требует TLS | Отключите TLS, используйте Plain text |

## Визуальная подсказка:
В Postman должно быть:

- URL: `http://localhost:8093` ✅

- TLS: **Отключено** ✅ (Plain text)

- Proto файл: **Импортирован** ✅

- Сервис: `CustomersService` ✅

## Проверка:
После правильной настройки вы должны увидеть:

- Список доступных методов в `CustomersService`

- Возможность вызвать метод и получить ответ

- Нет ошибок "Service unavailable" или "TLS required"
